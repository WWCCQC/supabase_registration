# ğŸ“Š RSM Power Authority - à¸à¸²à¸£à¹ƒà¸Šà¹‰à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ (Visual Guide)

## ğŸ¯ à¸•à¸²à¸£à¸²à¸‡à¸ªà¸£à¸¸à¸› - Quick Reference

```
SELECT: rsm, provider, power_authority, national_id
        â†“        â†“              â†“            â†“
       âœ…      âŒ             âœ…            âœ…
      à¹ƒà¸Šà¹‰     à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰          à¹ƒà¸Šà¹‰            à¹ƒà¸Šà¹‰
      à¸šà¹ˆà¸­à¸¢    à¹€à¸¥à¸¢            à¸šà¹ˆà¸­à¸¢           à¸—à¸¸à¸à¸—à¸µà¹ˆ
```

---

## ğŸ“‹ à¸•à¸²à¸£à¸²à¸‡à¸à¸²à¸£à¹ƒà¸Šà¹‰à¹à¸•à¹ˆà¸¥à¸°à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ

### ğŸ¢ **à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ 1: rsm**

| à¸¥à¸³à¸”à¸±à¸š | à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™ | à¹ƒà¸Šà¹‰ | à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” |
|------|--------|-----|-----------|
| 1 | Validation | âœ… | à¸•à¸£à¸§à¸ˆà¸§à¹ˆà¸² `rsm !== null` â†’ à¸‚à¹‰à¸²à¸¡à¸–à¹‰à¸²à¸§à¹ˆà¸²à¸‡ |
| 2 | Grouping | âœ… | `groupedData[rsm]` â† à¸«à¸¥à¸±à¸à¹ƒà¸™à¸à¸²à¸£à¸ˆà¸±à¸”à¸à¸¥à¸¸à¹ˆà¸¡ |
| 3 | Chart Label | âœ… | X-axis: "RSM2_BMA-East", "RSM7_UPC-CEW", ... |
| 4 | Count RSM | âœ… | `Object.keys(groupedData).length` = 8 |
| 5 | Summary | âœ… | `totalRsm: 8` |

**à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:**
```javascript
groupedData = {
  "RSM2_BMA-East": {...},
  "RSM7_UPC-CEW": {...},
  "RSM3_UPC-East": {...},
  ...
}

totalRsm = 8
```

---

### ğŸ“¦ **à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ 2: provider**

| à¸¥à¸³à¸”à¸±à¸š | à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™ | à¹ƒà¸Šà¹‰ | à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” |
|------|--------|-----|-----------|
| 1 | Validation | âŒ | à¹„à¸¡à¹ˆà¸¡à¸µà¸à¸²à¸£à¸•à¸£à¸§à¸ˆà¸ªà¸­à¸š |
| 2 | Grouping | âŒ | à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ |
| 3 | Filtering | âŒ | à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ |
| 4 | Counting | âŒ | à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ |
| 5 | Chart | âŒ | à¹„à¸¡à¹ˆà¹à¸ªà¸”à¸‡ |
| 6 | Summary | âŒ | à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ |

**à¸—à¸³à¹„à¸¡à¸”à¸¶à¸‡à¹à¸•à¹ˆà¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰?**
- à¸­à¸²à¸ˆà¹€à¸›à¹‡à¸™à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¸ªà¸³à¸£à¸­à¸‡
- à¹€à¸«à¸¥à¸·à¸­à¸ˆà¸²à¸à¸à¸²à¸£ refactor à¸à¹ˆà¸­à¸™à¸«à¸™à¹‰à¸²
- à¹„à¸§à¹‰à¸ªà¸³à¸«à¸£à¸±à¸š optimization à¹ƒà¸™à¸­à¸™à¸²à¸„à¸•

---

### âœ…âŒ **à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ 3: power_authority**

| à¸¥à¸³à¸”à¸±à¸š | à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™ | à¹ƒà¸Šà¹‰ | à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” |
|------|--------|-----|-----------|
| 1 | Validation | âœ… | à¸•à¸£à¸§à¸ˆà¸§à¹ˆà¸² `power_authority !== null` â†’ à¸‚à¹‰à¸²à¸¡à¸–à¹‰à¸²à¸§à¹ˆà¸²à¸‡ |
| 2 | Existence Count | âœ… | `nationalIdsWithAuthority.add(id)` |
| 3 | Clean/Normalize | âœ… | `toLowerCase()` â†’ "yes", "no" |
| 4 | Categorize | âœ… | Match "yes"/"y" â†’ Yes Set |
| | | | Match "no"/"n" â†’ No Set |
| 5 | Grouping | âœ… | `groupedData[rsm].Yes/No.add(id)` |
| 6 | Count | âœ… | `.Yes.size` + `.No.size` |
| 7 | Chart Bar | âœ… | Stacked bar: Yes (à¸ªà¸µà¹€à¸‚à¸µà¸¢à¸§) + No (à¸ªà¸µà¹€à¸«à¸¥à¸·à¸­à¸‡) |
| 8 | Summary | âœ… | `totalYes: 389`, `totalNo: 1720` |

**à¸„à¹ˆà¸²à¸—à¸µà¹ˆà¸¢à¸­à¸¡à¸£à¸±à¸š:**
```
Yes values: "Yes", "yes", "YES", "y", "Y"
No values: "No", "no", "NO", "n", "N"
```

**à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:**
```javascript
// Chart data
{ rsm: "RSM2_BMA-East", Yes: 50, No: 325, total: 375 }

// Summary
totalYes: 389
totalNo: 1720
```

---

### ğŸ”‘ **à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ 4: national_id â­ à¸ªà¸³à¸„à¸±à¸à¸—à¸µà¹ˆà¸ªà¸¸à¸”**

| à¸¥à¸³à¸”à¸±à¸š | à¸‚à¸±à¹‰à¸™à¸•à¸­à¸™ | à¹ƒà¸Šà¹‰ | à¸£à¸²à¸¢à¸¥à¸°à¹€à¸­à¸µà¸¢à¸” |
|------|--------|-----|-----------|
| 1 | **Validation** | âœ… | `if (!national_id) return;` â† à¸‚à¹‰à¸²à¸¡à¸–à¹‰à¸²à¸§à¹ˆà¸²à¸‡ |
| 2 | **Global Unique Count** | âœ… | `allNationalIds.add(national_id)` â†’ `totalTechnicians: 2905` |
| 3 | **RSM Existence Check** | âœ… | `nationalIdsWithRsm.add(national_id)` â†’ à¸™à¸±à¸šà¸Šà¹ˆà¸²à¸‡à¸—à¸µà¹ˆà¸¡à¸µ RSM |
| 4 | **Authority Count** | âœ… | `nationalIdsWithAuthority.add(national_id)` |
| 5 | **Grouping Yes** | âœ… | `groupedData[rsm].Yes.add(national_id)` |
| 6 | **Grouping No** | âœ… | `groupedData[rsm].No.add(national_id)` |
| 7 | **Summary Count** | âœ… | `.size` â†’ à¸™à¸±à¸šà¸ˆà¸³à¸™à¸§à¸™à¹ƒà¸™ Set |
| 8 | **Chart Display** | âœ… | `Yes: counts.Yes.size`, `No: counts.No.size` |

**à¸—à¸³à¹„à¸¡à¹ƒà¸Šà¹‰ national_id?**

```
âŒ à¸–à¹‰à¸²à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ national_id (à¸™à¸±à¸šà¹à¸„à¹ˆ records):
   2,905 records â‰  2,905 à¸„à¸™
   à¸–à¹‰à¸² 1 à¸„à¸™à¸¡à¸µ 2 records â†’ à¸™à¸±à¸šà¹€à¸›à¹‡à¸™ 2 âŒ

âœ… à¸–à¹‰à¸²à¹ƒà¸Šà¹‰ national_id (à¹€à¸à¹‡à¸šà¹ƒà¸™ Set):
   Set { "1234567890123", "1111111111111", ... }
   2,905 records = 2,905 unique IDs
   à¹„à¸¡à¹ˆà¸™à¸±à¸šà¸‹à¹‰à¸³ âœ…
```

**à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ:**
```javascript
// Global counts
allNationalIds.size = 2905
nationalIdsWithRsm.size = 2109
nationalIdsWithAuthority.size = 2109

// Grouped counts
groupedData["RSM2_BMA-East"].Yes = Set { "3750100546976", ... }
groupedData["RSM2_BMA-East"].Yes.size = 50

// Summary
totalTechnicians: 2905
totalTechniciansWithRsm: 2109
```

---

## ğŸ”„ **Data Flow - à¸‚à¹‰à¸­à¸¡à¸¹à¸¥à¹„à¸«à¸¥à¸œà¹ˆà¸²à¸™à¹à¸•à¹ˆà¸¥à¸°à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œ**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1 Record from Database:                                     â”‚
â”‚ {                                                           â”‚
â”‚   "rsm": "RSM2_BMA-East",       â† âœ… à¹ƒà¸Šà¹‰                     â”‚
â”‚   "provider": "True",           â† âŒ à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰                 â”‚
â”‚   "power_authority": "Yes",     â† âœ… à¹ƒà¸Šà¹‰                     â”‚
â”‚   "national_id": "3750100546976"â† âœ… à¹ƒà¸Šà¹‰                     â”‚
â”‚ }                                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚
        â–¼                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ rsm Check    â”‚    â”‚ national_id Check        â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ "RSM2_..." âœ…â”‚    â”‚ "3750..." âœ… exists      â”‚
    â”‚ (not null)   â”‚    â”‚ â†’ Continue              â”‚
    â”‚ â†’ Continue   â”‚    â”‚                          â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                     â”‚
        â–¼                     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Create/Get Group:                            â”‚
    â”‚ groupedData["RSM2_BMA-East"] = {             â”‚
    â”‚   Yes: Set(...),                            â”‚
    â”‚   No: Set(...)                              â”‚
    â”‚ }                                            â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                       â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                             â”‚
        â–¼                             â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ power_authority     â”‚    â”‚ national_id Add    â”‚
    â”‚ Process             â”‚    â”‚                    â”‚
    â”‚                     â”‚    â”‚ â€¢ allNationalIds   â”‚
    â”‚ "Yes" â†’ lowercase   â”‚    â”‚   .add(id)        â”‚
    â”‚ clean = "yes"       â”‚    â”‚ â†’ count += 1       â”‚
    â”‚                     â”‚    â”‚                    â”‚
    â”‚ if clean="yes":     â”‚    â”‚ â€¢ nationalIdsWithRsm
    â”‚   Group.Yes.add(id) â”‚    â”‚   .add(id)        â”‚
    â”‚   â†’ Yes.size += 1   â”‚    â”‚ â†’ count += 1       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚                          â”‚
            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                           â”‚
                           â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ Final State:                     â”‚
        â”‚                                  â”‚
        â”‚ groupedData["RSM2_"].Yes.size++  â”‚
        â”‚ allNationalIds.size++            â”‚
        â”‚ nationalIdsWithRsm.size++        â”‚
        â”‚ nationalIdsWithAuthority.size++  â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š **Matrix: à¹ƒà¸„à¸£à¹ƒà¸Šà¹‰à¸„à¸­à¸¥à¸±à¸¡à¸™à¹Œà¹„à¸«à¸™**

```
                    rsm  provider  power_auth  national_id
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Validation       â”‚ âœ…      âŒ        âœ…          âœ…        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Grouping         â”‚ âœ…      âŒ        âŒ          âŒ        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Categorize Yes/Noâ”‚ âŒ      âŒ        âœ…          âŒ        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Add to Set       â”‚ âŒ      âŒ        âŒ          âœ…        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Count/Size       â”‚ âœ…      âŒ        âŒ          âœ…        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Chart Label      â”‚ âœ…      âŒ        âŒ          âŒ        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Chart Data       â”‚ âœ…      âŒ        âœ…          âœ…        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Summary          â”‚ âœ…      âŒ        âœ…          âœ…        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Total Usage      â”‚  6      0         4           6        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ§® **Calculation Flow**

### **à¹ƒà¸Šà¹‰ rsm:**
```
1. Validation: rsm !== null?
2. Grouping: groupedData[rsm] = {...}
3. Count RSM: Object.keys(groupedData).length = 8
4. Label: Chart X-axis
5. Summary: totalRsm = 8
```

### **à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ provider:**
```
âŒ à¸‚à¹‰à¸²à¸¡à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”
```

### **à¹ƒà¸Šà¹‰ power_authority:**
```
1. Validation: power_authority !== null?
2. Clean: toLowerCase()
3. Match: if (clean === "yes") or (clean === "no")
4. Add: groupedData[rsm].Yes/No.add(national_id)
5. Count: .size
6. Summary: totalYes, totalNo
```

### **à¹ƒà¸Šà¹‰ national_id (à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸”):**
```
1. Validation: national_id !== null?
2. Global: allNationalIds.add(national_id)
3. RSM Check: nationalIdsWithRsm.add(national_id)
4. Authority: nationalIdsWithAuthority.add(national_id)
5. Yes Group: groupedData[rsm].Yes.add(national_id)
6. No Group: groupedData[rsm].No.add(national_id)
7. Count: .size â†’ 50, 325, 90, 232, ...
8. Summary: totalTechnicians = 2905
```

---

## ğŸ“ˆ **à¸•à¸±à¸§à¸­à¸¢à¹ˆà¸²à¸‡à¸œà¸¥à¸¥à¸±à¸à¸˜à¹Œ - 3 RSM**

```
Input (From Supabase):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ rsm        â”‚ provider â”‚ power_auth â”‚ national_id      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ RSM2_...   â”‚ True     â”‚ Yes        â”‚ 3750100546976 âœ…â”‚
â”‚ RSM2_...   â”‚ True     â”‚ No         â”‚ 1759900398701 âœ…â”‚
â”‚ RSM2_...   â”‚ True     â”‚ Yes        â”‚ 3601100964206 âœ…â”‚
â”‚ ...        â”‚ ...      â”‚ ...        â”‚ ... (à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” 50)â”‚
â”‚ RSM7_...   â”‚ AIS      â”‚ Yes        â”‚ 3499900014309 âœ…â”‚
â”‚ RSM7_...   â”‚ AIS      â”‚ No         â”‚ 1499900225036 âœ…â”‚
â”‚ ...        â”‚ ...      â”‚ ...        â”‚ ... (à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” 90)â”‚
â”‚ RSM3_...   â”‚ TOT      â”‚ Yes        â”‚ 1499900224919 âœ…â”‚
â”‚ ...        â”‚ ...      â”‚ ...        â”‚ ... (à¸—à¸±à¹‰à¸‡à¸«à¸¡à¸” 73)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“          â†“          â†“           â†“
   âœ…         âŒ         âœ…          âœ…
  à¹ƒà¸Šà¹‰       à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰      à¹ƒà¸Šà¹‰         à¹ƒà¸Šà¹‰

Processing:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ groupedData = {                      â”‚
â”‚   "RSM2_BMA-East": {                â”‚
â”‚     Yes: Set(50),    â† 50 IDs       â”‚
â”‚     No: Set(325)     â† 325 IDs      â”‚
â”‚   },                                 â”‚
â”‚   "RSM7_UPC-CEW": {                 â”‚
â”‚     Yes: Set(90),    â† 90 IDs       â”‚
â”‚     No: Set(232)     â† 232 IDs      â”‚
â”‚   },                                 â”‚
â”‚   "RSM3_UPC-East": {                â”‚
â”‚     Yes: Set(73),    â† 73 IDs       â”‚
â”‚     No: Set(194)     â† 194 IDs      â”‚
â”‚   }                                  â”‚
â”‚ }                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Chart Output:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [                                       â”‚
â”‚   {                                     â”‚
â”‚     rsm: "RSM2_BMA-East",              â”‚
â”‚     Yes: 50,      â† power_authority+ID â”‚
â”‚     No: 325,      â† power_authority+ID â”‚
â”‚     total: 375                          â”‚
â”‚   },                                    â”‚
â”‚   {                                     â”‚
â”‚     rsm: "RSM7_UPC-CEW",               â”‚
â”‚     Yes: 90,                           â”‚
â”‚     No: 232,                           â”‚
â”‚     total: 322                         â”‚
â”‚   },                                    â”‚
â”‚   {                                     â”‚
â”‚     rsm: "RSM3_UPC-East",              â”‚
â”‚     Yes: 73,                           â”‚
â”‚     No: 194,                           â”‚
â”‚     total: 267                         â”‚
â”‚   }                                     â”‚
â”‚ ]                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Summary:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ totalRsm: 8                 â† rsm count â”‚
â”‚ totalTechnicians: 2905      â† ID count  â”‚
â”‚ totalYes: 389               â† power_authâ”‚
â”‚ totalNo: 1720               â† power_authâ”‚
â”‚ recordsWithoutRsm: 796      â† rsm+ID   â”‚
â”‚ recordsWithoutAuthority: 796â† power_authâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¯ **à¸ªà¸£à¸¸à¸› - à¹ƒà¸„à¸£à¹ƒà¸Šà¹‰à¸­à¸°à¹„à¸£à¸¡à¸²à¸à¸—à¸µà¹ˆà¸ªà¸¸à¸”**

```
Column Usage Ranking:
1. ğŸ† national_id    â† à¹ƒà¸Šà¹‰ 6 à¸„à¸£à¸±à¹‰à¸‡ (à¸—à¸¸à¸à¸—à¸µà¹ˆà¹€à¸à¸·à¸­à¸š)
2. ğŸ¥ˆ rsm            â† à¹ƒà¸Šà¹‰ 6 à¸„à¸£à¸±à¹‰à¸‡ (grouping + labeling)
3. ğŸ¥‰ power_authorityâ† à¹ƒà¸Šà¹‰ 4 à¸„à¸£à¸±à¹‰à¸‡ (categorization)
4. âŒ provider       â† à¹ƒà¸Šà¹‰ 0 à¸„à¸£à¸±à¹‰à¸‡ (à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰à¹€à¸¥à¸¢)
```

**Bottom Line:**
- **national_id** = à¹ƒà¸ˆà¸à¸¥à¸²à¸‡à¸‚à¸­à¸‡à¸£à¸°à¸šà¸š (unique counting)
- **rsm** = à¸à¸³à¸«à¸™à¸”à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡ (grouping)
- **power_authority** = à¸ªà¸£à¹‰à¸²à¸‡ categories (Yes/No)
- **provider** = à¹„à¸¡à¹ˆà¸¡à¸µà¸›à¸£à¸°à¹‚à¸¢à¸Šà¸™à¹Œà¹ƒà¸™à¸à¸£à¸²à¸Ÿà¸™à¸µà¹‰

---

## âœ¨ **Key Insights**

### ğŸ”‘ **à¹€à¸«à¸•à¸¸à¸œà¸¥à¸à¸²à¸£à¹ƒà¸Šà¹‰ national_id:**
```
â†’ Prevents double-counting (à¹„à¸¡à¹ˆà¸™à¸±à¸šà¸‹à¹‰à¸³)
â†’ Represents unique people (à¹€à¸›à¹‡à¸™à¸•à¸±à¸§à¹à¸—à¸™à¸„à¸™à¹€à¸”à¸µà¸¢à¸§)
â†’ Used in all counting operations
â†’ Stored in Sets for efficiency
```

### ğŸ”‘ **à¹€à¸«à¸•à¸¸à¸œà¸¥à¸à¸²à¸£à¹ƒà¸Šà¹‰ rsm:**
```
â†’ Main grouping key (à¸ˆà¸±à¸”à¸à¸¥à¸¸à¹ˆà¸¡)
â†’ Creates chart structure (à¸ªà¸£à¹‰à¸²à¸‡à¹‚à¸„à¸£à¸‡à¸ªà¸£à¹‰à¸²à¸‡)
â†’ Defines X-axis labels
â†’ Counts unique RSM values
```

### ğŸ”‘ **à¹€à¸«à¸•à¸¸à¸œà¸¥à¸à¸²à¸£à¹ƒà¸Šà¹‰ power_authority:**
```
â†’ Categorizes into Yes/No (à¹à¸¢à¸à¸›à¸£à¸°à¹€à¸ à¸—)
â†’ Creates stacked bar chart
â†’ Calculates totals
```

### ğŸ”‘ **à¹€à¸«à¸•à¸¸à¸œà¸¥à¹„à¸¡à¹ˆà¹ƒà¸Šà¹‰ provider:**
```
â†’ No business logic requires it
â†’ Not used in calculations
â†’ Not displayed in chart
â†’ Not included in summary
```
